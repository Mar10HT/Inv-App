<div class="min-h-screen bg-[var(--surface)] p-6">
  <div class="max-w-7xl mx-auto">
    <!-- Header Section -->
    <div class="mb-8">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
        <div>
        <div class="mb-8">
          <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"> 
            <div>
              <h1 class="text-4xl font-bold text-[var(--primary-on)]">Inventory Management</h1>
              <p class="text-[var(--secondary)] textlg">Heres whats happening with your inventory today!</p>
            </div>
          </div>
        </div>
      </div>
        <button mat-raised-button (click)="addNewItem()" class="!bg-[var(--primary)] text-[var(--primary-on)] flex items-center gap-2 w-fit">
          <mat-icon>add</mat-icon>
          Add New Item
        </button>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Total Items -->
      <mat-card class="!bg-[var(--surface-container)] !border !border-[color-mix(in_srgb,var(--secondary)_20%,transparent)] !rounded-xl !shadow-sm hover:!shadow-md !transition-shadow">
        <mat-card-content class="!p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-[var(--secondary)]">Total Items</p>
              <p class="text-3xl font-bold text-[var(--primary-on)]">{{ totalItems() }}</p>
              <p class="text-sm text-green-600 mt-1">+8% from last month</p>
            </div>
            <div class="bg-[color-mix(in_srgb,var(--secondary)_20%,transparent)] p-3 rounded-lg">
              <mat-icon class="!text-[var(--secondary)]">inventory</mat-icon>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      
      <!-- In Stock -->
      <mat-card class="!bg-[var(--surface-container)] !border !border-[color-mix(in_srgb,var(--secondary)_20%,transparent)] !rounded-xl !shadow-sm hover:!shadow-md !transition-shadow">
        <mat-card-content class="!p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-[var(--secondary)]">In Stock</p>
              <p class="text-3xl font-bold text-[var(--primary-on)]">{{ inStockItems() }}</p>
              <p class="text-sm text-green-600 mt-1">+12% from last month</p>
            </div>
            <div class="bg-green-100 p-3 rounded-lg">
              <mat-icon class="!text-green-600">check_circle</mat-icon>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      
      <!-- Low Stock -->
      <mat-card class="!bg-[var(--surface-container)] !border !border-[color-mix(in_srgb,var(--secondary)_20%,transparent)] !rounded-xl !shadow-sm hover:!shadow-md !transition-shadow">
        <mat-card-content class="!p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-[var(--secondary)]">Low Stock</p>
              <p class="text-3xl font-bold text-[var(--primary-on)]">{{ lowStockItems() }}</p>
              <p class="text-sm text-orange-600 mt-1">+5% from last month</p>
            </div>
            <div class="bg-orange-100 p-3 rounded-lg">
              <mat-icon class="!text-orange-600">warning</mat-icon>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      
      <!-- Out of Stock -->
      <mat-card class="!bg-[var(--surface-container)] !border !border-[color-mix(in_srgb,var(--tertiary)_20%,transparent)] !rounded-xl !shadow-sm hover:!shadow-md !transition-shadow">
        <mat-card-content class="!p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-[var(--secondary)]">Out of Stock</p>
              <p class="text-3xl font-bold text-[var(--primary-on)]">{{ outOfStockItems() }}</p>
              <p class="text-sm text-[var(--tertiary)] mt-1">-3% from last month</p>
            </div>
            <div class="bg-[color-mix(in_srgb,var(--tertiary)_20%,transparent)] p-3 rounded-lg">
              <mat-icon class="!text-[var(--tertiary)]">error</mat-icon>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    <mat-card class="!bg-[var(--surface-container)] !border !border-[color-mix(in_srgb,var(--secondary)_20%,transparent)] !rounded-xl !shadow-sm mb-8">
      <mat-card-content class="!p-6">
        <div class="flex flex-col lg:flex-row gap-4">
          <mat-form-field class="flex-1" appearance="outline">
            <mat-label>Search Items...</mat-label>
            <input matInput #searchInput [value]="searchQuery()" (input)="onSearchChange(searchInput.value)" placeholder="Search by name, category or description">
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
          <mat-form-field class="lg:w-48" appearance="outline">
            <mat-label>Category</mat-label>
            <mat-select value="selectedCategory()" (selectionChange)="onCategoryChange($event.value)">
              <mat-option value="all">All Category</mat-option>
              <mat-option *ngFor="let category of categories()" [value]="category">{{category}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="lg:w-48" appearance="outline">
            <mat-label>Location</mat-label>
            <mat-select [value]="selectedLocation()" (selectionChange)="onLocationChange($event.value)">
              <mat-option value="all">All Locations</mat-option>
              <mat-option *ngFor="let location of locations()" [value]="location">{{location}}</mat-option>
            </mat-select>
          </mat-form-field>
          
          <mat-form-field class="lg:w-48" appearance="outline">
            <mat-label>Status</mat-label>
            <mat-select [value]="selectedStatus()" (selectionChange)="onStatusChange($event.value)">
              <mat-option value="all">All Status</mat-option>
              <mat-option value="in-stock">In Stock</mat-option>
              <mat-option value="low-stock">Low Stock</mat-option>
              <mat-option value="out-of-stock">Out of Stock</mat-option>
            </mat-select>
          </mat-form-field>
          <button 
            *ngIf="searchQuery() !== '' || selectedCategory() !== 'all' || selectedStatus() !== 'all'"
            class="!border-[var(--secondary)] !text-[var(--secondary-on)] h-fit"
            mat-stroked-button
            (click)="clearFilters()">
            Clear Filters
          </button>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card class="!bg-[var(--primary)] !border !border-[color-mix(in_srgb,var(--primary)_20%,transparent)] !rounded-xl !shadow-sm overflow-hidden">
      <mat-card-header class="!px-6 !py-4 !border-b !border-[color-mix(in_srgb,var(--secondary)_20%,transparent)]">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 w-full">
          <div>
            <mat-card-title class="!text-xl !font-semibold text-[var(--primary-on)] !mb-1">Recent Items</mat-card-title>
            <mat-card-subtitle class="!text-[var(--secondary)] !text-sm">{{ dataSource.data.length }}</mat-card-subtitle>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button mat-flat-button (click)="exportData()"
          class="!bg-[var(--secondary)] !text-[var(--secondary-on)] !text-sm flex items center gap-2">
          <mat-icon class="!text-sm">download</mat-icon>
          Export Data
          </button>
          <button mat-stroked-button (click)="resetData()"
          class="!border-[var(--primary-on)] !text-[var(--secondary-on)] !text-sm flex items-center gap-2">
          <mat-icon class="!text-sm">refresh</mat-icon>
          Reset
          </button>
        </div>
      </mat-card-header>
      <div class="hidden lg:block">
        <mat-table [dataSource]="dataSource" matSort class="w-full !bg-[var(--primary)]">
          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="!text-[var(--secondary)] !font-medium"> 
              Item 
            </mat-header-cell>
            <mat-cell *matCellDef="let item" class="!text-[var(--primary-on)] !font-medium">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-[var(--secondary)] rounded-lg flex items-center justify-center">
                  <mat-icon class="!text-[var(--secondary-on)] !text-lg">inventory_2</mat-icon>
                </div>
                <div>
                  <p class="font-medium">{{ item.name }}</p>
                  <p class="text-sm text-[var(--secondary)]" *ngIf="item.description">{{ item.description.length > 50 ? (item.description | slice:0:50) + '...' : item.description }}</p>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <!-- Category Column -->
          <ng-container matColumnDef="category">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="!text-[var(--secondary)] !font-medium">Category</mat-header-cell>
            <mat-cell *matCellDef="let item" class="!text-[var(--secondary)]">{{ item.category }}</mat-cell>
          </ng-container>

          <!-- Quantity Column -->
          <ng-container matColumnDef="quantity">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="!text-[var(--secondary)] !font-medium">Quantity</mat-header-cell>
            <mat-cell *matCellDef="let item" class="!text-[var(--primary-on)]">{{ item.quantity }}</mat-cell>
          </ng-container>

          <!-- Location Column -->
          <ng-container matColumnDef="location">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="!text-[var(--secondary)] !font-medium">Location</mat-header-cell>
            <mat-cell *matCellDef="let item" class="!text-[var(--secondary)]">
              <div class="flex items-center gap-2">
                <mat-icon class="!text-sm">place</mat-icon>
                <span>{{ item.location }}</span>
              </div>
            </mat-cell>
          </ng-container>

          <!-- Last Updated Column -->
          <ng-container matColumnDef="lastUpdated">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="!text-[var(--secondary)] !font-medium">Last Updated</mat-header-cell>
              <mat-cell *matCellDef="let item" class="!text-[var(--secondary)]">
                 {{ formatDate(item.lastUpdated) }}
              </mat-cell>
          </ng-container>

          <!-- Status Column -->
          <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="!text-[var(--secondary)] !font-medium">Status</mat-header-cell>
            <mat-cell *matCellDef="let item">
              <mat-chip [ngClass]="getStatusColor(item.status)" class="!text-xs !font-medium">
                {{ item.status === 'in-stock' ? 'In Stock' : item.status === 'low-stock' ? 'Low Stock' : 'Out of Stock' }}
              </mat-chip>
            </mat-cell>
          </ng-container>

          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef class="!text-[var(--secondary)] !font-medium">Actions</mat-header-cell>
            <mat-cell *matCellDef="let item">
              <div class="flex space-x-2">
                <button 
                  mat-icon-button 
                  (click)="viewItem(item); $event.stopPropagation()"
                  class="!text-[var(--secondary)] hover:!bg-[color-mix(in_srgb,var(--secondary)_10%,transparent)]">
                  <mat-icon class="!text-base">visibility</mat-icon>
                </button>
                <button 
                  mat-icon-button 
                  (click)="editItem(item); $event.stopPropagation()"
                  class="!text-[var(--secondary)] hover:!bg-[color-mix(in_srgb,var(--secondary)_10%,transparent)]">
                  <mat-icon class="!text-base">edit</mat-icon>
                </button>
                <button 
                  mat-icon-button 
                  (click)="deleteItem(item); $event.stopPropagation()"
                  class="!text-[var(--tertiary)] hover:!bg-[color-mix(in_srgb,var(--tertiary)_10%,transparent)]">
                  <mat-icon class="!text-base">delete</mat-icon>
                </button>
              </div>
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns" class="!bg-[color-mix(in_srgb,var(--surface)_50%,transparent)]"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;" 
                   class="hover:!bg-[color-mix(in_srgb,var(--secondary)_5%,transparent)] !transition-colors !cursor-pointer"
                   (click)="viewItem(row)"></mat-row>
        </mat-table>
      </div>

      <!-- Mobile Card View -->
      <div class="lg:hidden divide-y divide-[color-mix(in_srgb,var(--secondary)_20%,transparent)]">
        <div *ngIf="dataSource.data.length === 0" class="p-8 text-center">
          <mat-icon class="!text-6xl !text-[var(--secondary)] mb-4">inventory_2</mat-icon>
          <h3 class="text-lg font-semibold text-[var(--primary-on)] mb-2">No items found</h3>
          <p class="text-[var(--secondary)]">Try adjusting your search or filter criteria</p>
        </div>
        
        <div *ngFor="let item of dataSource.data" class="p-4">
          <div class="flex justify-between items-start mb-3">
            <div class="flex-1">
              <h3 class="font-semibold text-[var(--primary-on)] text-lg">{{ item.name }}</h3>
              <p class="text-[var(--secondary)] text-sm">{{ item.category }}</p>
              <p class="text-[var(--secondary)] text-sm mt-1" *ngIf="item.description">
                {{ item.description.length > 60 ? (item.description | slice:0:60) + '...' : item.description }}
              </p>
            </div>
            <mat-chip [ngClass]="getStatusColor(item.status)" class="!text-xs !font-medium ml-2">
              {{ item.status === 'in-stock' ? 'In Stock' : item.status === 'low-stock' ? 'Low Stock' : 'Out of Stock' }}
            </mat-chip>
          </div>
          
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <p class="text-xs text-[var(--secondary)] font-medium uppercase tracking-wide">Quantity</p>
              <p class="text-[var(--primary-on)] font-semibold">{{ item.quantity }} units</p>
            </div>
            <div>
              <p class="text-xs text-[var(--secondary)] font-medium uppercase tracking-wide">Location</p>
              <p class="text-[var(--primary-on)] font-semibold">{{ item.location }}</p>
            </div>
          </div>

          <div class="mb-4">
            <p class="text-xs text-[var(--secondary)] font-medium uppercase tracking-wide">Last Updated</p>
            <p class="text-[var(--primary-on)] font-semibold">{{ formatDate(item.lastUpdated) }}</p>
          </div>
          
          <div class="flex justify-end space-x-2 pt-2 border-t border-[color-mix(in_srgb,var(--secondary)_20%,transparent)]">
            <button 
              mat-icon-button 
              (click)="viewItem(item); $event.stopPropagation()"
              class="!text-[var(--secondary)] hover:!bg-[color-mix(in_srgb,var(--secondary)_10%,transparent)]">
              <mat-icon class="!text-base">visibility</mat-icon>
            </button>
            <button 
              mat-icon-button 
              (click)="editItem(item); $event.stopPropagation()"
              class="!text-[var(--secondary)] hover:!bg-[color-mix(in_srgb,var(--secondary)_10%,transparent)]">
              <mat-icon class="!text-base">edit</mat-icon>
            </button>
            <button 
              mat-icon-button 
              (click)="deleteItem(item); $event.stopPropagation()"
              class="!text-[var(--tertiary)] hover:!bg-[color-mix(in_srgb,var(--tertiary)_10%,transparent)]">
              <mat-icon class="!text-base">delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </mat-card>
      </div>
    </div>